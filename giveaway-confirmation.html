<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entry Confirmed - InstelTech Giveaway</title>
    <meta name="robots" content="noindex, nofollow" />
    <script src="env-config.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        nerve: {
                            50: '#f0f5fa', 100: '#dae4f0', 200: '#b5c9e0', 300: '#8badc9',
                            400: '#6090b0', 500: '#3d7097', 600: '#2a5578', 700: '#1e3a5f',
                            800: '#162a42', 900: '#0f1d2e', 950: '#070e18',
                        },
                        primary: { DEFAULT: '#dc2626', dark: '#b91c1c', light: '#ef4444' },
                    },
                    fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] },
                }
            }
        }
    </script>
    <style>
        @keyframes checkPop { 0% { transform: scale(0); } 60% { transform: scale(1.2); } 100% { transform: scale(1); } }
        @keyframes slideIn { from { transform: translateX(300px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOut { from { transform: translateX(0); opacity: 1; } to { transform: translateX(300px); opacity: 0; } }
        .check-pop { animation: checkPop 0.5s ease; }
    </style>
</head>
<body class="bg-slate-50 font-sans text-nerve-900 min-h-screen flex items-center justify-center p-4">
    <div class="max-w-lg w-full">
        <div class="bg-white rounded-2xl border border-slate-100 p-6 sm:p-8 text-center shadow-sm">

            <div class="w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-5 check-pop">
                <i class="fas fa-check text-white text-2xl"></i>
            </div>

            <h1 class="text-2xl font-black text-nerve-900 mb-2">You're In!</h1>
            <p class="text-sm text-slate-500 mb-6">Your entry for the AI WhatsApp Business Assistant Giveaway has been confirmed.</p>

            <div class="bg-nerve-900 text-white rounded-xl p-4 mb-6">
                <p class="text-xs text-slate-400 mb-1">Your Score</p>
                <p id="entryScore" class="text-3xl font-black">0</p>
                <p class="text-xs text-slate-500">Entry Points</p>
            </div>

            <div class="bg-slate-50 rounded-xl p-5 mb-6 text-left">
                <h3 class="text-sm font-bold text-nerve-900 mb-3 flex items-center gap-2">
                    <i class="fas fa-gift text-primary"></i> Share With Business Partners
                </h3>
                <p class="text-xs text-slate-500 mb-4">
                    Share your referral link with business people you know who might benefit. If someone you refer wins, <strong class="text-nerve-900">you BOTH win the $2,500 prize!</strong>
                </p>

                <div class="bg-white border-2 border-dashed border-primary/30 rounded-lg p-3 mb-3">
                    <p class="text-[10px] text-slate-400 font-semibold uppercase mb-1">Your Referral Link</p>
                    <p id="referralLink" class="text-xs font-bold text-nerve-900 break-all mb-2">Loading...</p>
                    <button onclick="copyReferralLink()" class="bg-nerve-900 hover:bg-nerve-800 text-white px-4 py-1.5 rounded-lg text-xs font-bold transition-all inline-flex items-center gap-2">
                        <i class="fas fa-copy"></i> Copy Link
                    </button>
                </div>

                <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                    <p class="text-xs text-amber-700 font-medium">
                        <i class="fas fa-star text-amber-500 mr-1"></i> +30 points for each business partner who enters!
                    </p>
                </div>
            </div>

            <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-5 mb-6 text-left">
                <h3 class="text-sm font-bold text-nerve-900 mb-3">What Happens Next</h3>
                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-emerald-500 text-white text-xs font-bold flex items-center justify-center shrink-0">1</div>
                        <p class="text-xs text-slate-600"><strong>Stay in the WhatsApp Channel</strong> - Winners are announced there.</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-emerald-500 text-white text-xs font-bold flex items-center justify-center shrink-0">2</div>
                        <p class="text-xs text-slate-600"><strong>Share your referral link</strong> - More referrals = better chances.</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 rounded-full bg-emerald-500 text-white text-xs font-bold flex items-center justify-center shrink-0">3</div>
                        <p class="text-xs text-slate-600"><strong>Wait for results</strong> - Winner announced within 48 hours after deadline.</p>
                    </div>
                </div>
            </div>

            <p class="text-[10px] text-slate-400">
                Questions? Contact us at +263 787 938 836
            </p>
        </div>
    </div>

    <script>
        var SUPABASE_URL = window.VITE_SUPABASE_URL || '';
        var SUPABASE_KEY = window.VITE_SUPABASE_ANON_KEY || '';

        function initConfirmationPage() {
            var entryData = JSON.parse(sessionStorage.getItem('giveaway_entry') || '{}');

            if (!entryData.referralCode) {
                window.location.href = 'giveaway.html';
                return;
            }

            document.getElementById('entryScore').textContent = entryData.score || 0;
            var referralUrl = window.location.origin + '/giveaway.html?ref=' + entryData.referralCode;
            document.getElementById('referralLink').textContent = referralUrl;
        }

        function copyReferralLink() {
            var linkText = document.getElementById('referralLink').textContent;
            navigator.clipboard.writeText(linkText).then(function() {
                showNotification('Referral link copied!', 'success');
            }).catch(function() {
                showNotification('Failed to copy. Please select and copy manually.', 'error');
            });
        }

        function showNotification(message, type) {
            type = type || 'info';
            var bgColor = type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6';
            var notification = document.createElement('div');
            notification.style.cssText = 'position:fixed;top:16px;right:16px;background:' + bgColor + ';color:white;padding:12px 20px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.2);z-index:10000;max-width:320px;font-size:13px;font-weight:600;animation:slideIn 0.4s ease;';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(function() {
                notification.style.animation = 'slideOut 0.4s ease';
                setTimeout(function() { notification.remove(); }, 400);
            }, 3500);
        }

        window.addEventListener('DOMContentLoaded', initConfirmationPage);
    </script>
</body>
</html>